<div data-ng-include src="'views/includes/connection.html'"></div>
<div class="api_page">
    <div class="page-header">
        <h1 translate=""><span class="ng-scope">API HTTP Endpoints</span></h1>
    </div>
    <h3>Block</h3>
    <pre><code>/insight-api/block/[:hash]
/insight-api/block/00000000a967199a2fad0877433c93df785a8d8ce062e5f9b451cd1397bdbf62</code></pre>
    <h3>Block Index</h3>
    <p>Get block hash by height</p>
    <pre><code>/insight-api/block-index/[:height]
/insight-api/block-index/0</code></pre>
    <p>This would return:</p>
    <pre><code>{
    "blockHash":"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f"
}</code></pre>
    <p>which is the hash of the Genesis block (0 height)</p>
    <h3>Raw Block</h3>
    <pre><code>/insight-api/rawblock/[:blockHash]
/insight-api/rawblock/[:blockHeight]</code></pre>
    <p>This would return:</p>
    <pre><code>{
    "rawblock":"blockhexstring..."
}    </code></pre>
    <h3>Block Summaries</h3>
    <p>Get block summaries by date:</p>
    <pre><code>/insight-api/blocks?limit=3&amp;blockDate=2016-04-22</code></pre>
    <p>Example response:</p>
    <pre><code>{
    "blocks": [
        {
            "height": 408495,
            "size": 989237,
            "hash": "00000000000000000108a1f4d4db839702d72f16561b1154600a26c453ecb378",
            "time": 1461360083,
            "txlength": 1695,
            "poolInfo": {
                "poolName": "BTCC Pool",
                "url": "https://pool.btcc.com/"
            }
        }
    ],
    "length": 1,
    "pagination": {
        "next": "2016-04-23",
        "prev": "2016-04-21",
        "currentTs": 1461369599,
        "current": "2016-04-22",
        "isToday": true,
        "more": true,
        "moreTs": 1461369600
    }
}</code></pre>
    <h3>Transaction</h3>
    <pre><code>/insight-api/tx/[:txid]
/insight-api/tx/525de308971eabd941b139f46c7198b5af9479325c2395db7f2fb5ae8562556c
/insight-api/rawtx/[:rawid]
/insight-api/rawtx/525de308971eabd941b139f46c7198b5af9479325c2395db7f2fb5ae8562556c</code></pre>
    <h3>Address</h3>
    <pre><code>/insight-api/addr/[:addr][?noTxList=1][&amp;from=&amp;to=]
/insight-api/addr/mmvP3mTe53qxHdPqXEvdu8WdC7GfQ2vmx5?noTxList=1
/insight-api/addr/mmvP3mTe53qxHdPqXEvdu8WdC7GfQ2vmx5?from=1000&amp;to=2000</code></pre>
    <h3>Address Properties</h3>
    <pre><code>/insight-api/addr/[:addr]/balance
/insight-api/addr/[:addr]/totalReceived
/insight-api/addr/[:addr]/totalSent
/insight-api/addr/[:addr]/unconfirmedBalance</code></pre>
    <p>The response contains the value in Satoshis.</p>
    <h3>Unspent Outputs</h3>
    <pre><code>
        /insight-api/addr/[:addr]/utxo
    </code></pre>
    <p>Sample return:</p>
    <pre><code>[
    {
        "address":"mo9ncXisMeAoXwqcV5EWuyncbmCcQN4rVs",
        "txid":"d5f8a96faccf79d4c087fa217627bb1120e83f8ea1a7d84b1de4277ead9bbac1",
        "vout":0,
        "scriptPubKey":"76a91453c0307d6851aa0ce7825ba883c6bd9ad242b48688ac",
        "amount":0.000006,
        "satoshis":600,
        "confirmations":0,
        "ts":1461349425
    },
    {
        "address": "mo9ncXisMeAoXwqcV5EWuyncbmCcQN4rVs",
        "txid": "bc9df3b92120feaee4edc80963d8ed59d6a78ea0defef3ec3cb374f2015bfc6e",
        "vout": 1,
        "scriptPubKey": "76a91453c0307d6851aa0ce7825ba883c6bd9ad242b48688ac",
        "amount": 0.12345678,
        "satoshis: 12345678,
        "confirmations": 1,
        "height": 300001
    }
]</code></pre>
    <h3>Unspent Outputs for Multiple Addresses</h3>
    <p>GET method:</p>
    <pre><code>/insight-api/addrs/[:addrs]/utxo
/insight-api/addrs/2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f/utxo</code></pre>
    <p>POST method:</p>
    <pre><code>/insight-api/addrs/utxo</code></pre>
    <p>POST params:</p>
    <pre><code>addrs: 2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f</code></pre>
    <h3>Transactions by Block</h3>
    <pre><code>/insight-api/txs/?block=HASH
/insight-api/txs/?block=00000000fa6cf7367e50ad14eb0ca4737131f256fc4c5841fd3c3f140140e6b6</code></pre>
    <h3>Transactions by Address</h3>
    <pre><code>/insight-api/txs/?address=ADDR
/insight-api/txs/?address=mmhmMNfBiZZ37g1tgg2t8DDbNoEdqKVxAL</code></pre>
    <h3>Transactions for Multiple Addresses</h3>
    <p>GET method:</p>
    <pre><code>/insight-api/addrs/[:addrs]/txs[?from=&amp;to=]
/insight-api/addrs/2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f/txs?from=0&amp;to=20</code></pre>
    <p>POST method:</p>
    <pre><code>/insight-api/addrs/txs</code></pre>
    <p>POST params:</p>
    <pre><code>addrs: 2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f
from (optional): 0
to (optional): 20
noAsm (optional): 1 (will omit script asm from results)
noScriptSig (optional): 1 (will omit the scriptSig from all inputs)
noSpent (option): 1 (will omit spent information per output)</code></pre>
    <p>Sample output:</p>
    <pre><code>{
    totalItems: 100,
    from: 0,
    to: 20,
    items: [
        {
            txid: '3e81723d069b12983b2ef694c9782d32fca26cc978de744acbc32c3d3496e915',
           version: 1,
           locktime: 0,
           vin: [Object],
           vout: [Object],
           blockhash: '00000000011a135e5277f5493c52c66829792392632b8b65429cf07ad3c47a6c',
           confirmations: 109367,
           time: 1393659685,
           blocktime: 1393659685,
           valueOut: 0.3453,
           size: 225,
           firstSeenTs: undefined,
           valueIn: 0.3454,
           fees: 0.0001
        },
        { ... },
        { ... },
          ...
        { ... }
    ]
}</code></pre>
    <p>Note: if pagination params are not specified, the result is an array of transactions.</p>
    <h3>Transaction Broadcasting</h3>
    <p>POST method:</p>
    <pre><code>/insight-api/tx/send</code></pre>
    <p>POST params:</p>
    <pre><code>rawtx: "signed transaction as hex string"
eg
rawtx: 01000000017b1eabe0209b1fe794124575ef807057c77ada2138ae4fa8d6c4de0398a14f3f00000000494830450221008949f0cb400094ad2b5eb399d59d01c14d73d8fe6e96df1a7150deb388ab8935022079656090d7f6bac4c9a94e0aad311a4268e082a725f8aeae0573fb12ff866a5f01ffffffff01f0ca052a010000001976a914cbc20a7664f2f69e5355aa427045bc15e7c6c77288ac00000000</code></pre>
    <p>POST response:</p>
    <pre><code>{
    txid: [:txid]
}
eg
{
    txid: "c7736a0a0046d5a8cc61c8c3c2821d4d7517f5de2bc66a966011aaa79965ffba"
}</code></pre>
    <h3>Historic Blockchain Data Sync Status</h3>
    <pre><code>/insight-api/sync</code></pre>
    <h3>Live Network P2P Data Sync Status</h3>
    <pre><code>/insight-api/peer</code></pre>
    <h3>Status of the Bitcoin Network</h3>
    <pre><code>/insight-api/status?q=xxx</code></pre>
    <p>Where "xxx" can be:</p>
    <ul>
        <li>getInfo</li>
        <li>getDifficulty</li>
        <li>getBestBlockHash</li>
        <li>getLastBlockHash</li>
    </ul>
    <h3>Utility Methods</h3>
    <pre><code>/insight-api/utils/estimatefee[?nbBlocks=2]</code></pre>
    <h2>Web Socket API</h2>
    <p>The web socket API is served using <a href="http://socket.io" rel="nofollow">socket.io</a>.</p>
    <p>The following are the events published by insight:</p>
    <p><code>tx</code>: new transaction received from network. This event is published in the 'inv' room. Data will be a app/models/Transaction object.</p>
    <p>Sample output:</p>
    <pre><code>{
    "txid":"00c1b1acb310b87085c7deaaeba478cef5dc9519fab87a4d943ecbb39bd5b053",
    "processed":false
    ...
}</code></pre>
    <p><code>block</code>: new block received from network. This event is published in the <code>inv</code> room. Data will be a app/models/Block object.</p>
    <p>Sample output:</p>
    <pre><code>{
    "hash":"000000004a3d187c430cd6a5e988aca3b19e1f1d1727a50dead6c8ac26899b96",
    "time":1389789343,
    ...
}</code></pre>
    <p><code>&lt;bitcoinAddress&gt;</code>: new transaction concerning  received from network. This event is published in the <code>&lt;bitcoinAddress&gt;</code> room.</p>
    <p><code>status</code>: every 1% increment on the sync task, this event will be triggered. This event is published in the <code>sync</code> room.</p>
    <p>Sample output:</p>
    <pre><code>{
    blocksToSync: 164141,
    syncedBlocks: 475,
    upToExisting: true,
    scanningBackward: true,
    isEndGenesis: true,
    end: "000000000933ea01ad0ee984209779baaec3ced90fa3f408719526f8d77f4943",
    isStartGenesis: false,
    start: "000000009f929800556a8f3cfdbe57c187f2f679e351b12f7011bfc276c41b6d"
}</code></pre>
    <h3>Example Usage</h3>
    <p>The following html page connects to the socket.io insight API and listens for new transactions.</p>
    <p>html</p>
    <pre><code>&lt;html&gt;
    &lt;body&gt;
        &lt;script src="http://&lt;insight-server&gt;:&lt;port&gt;/socket.io/socket.io.js"&gt;&lt;/script&gt;
        &lt;script&gt;
            eventToListenTo = 'tx'
            room = 'inv'

            var socket = io("http://&lt;insight-server&gt;:&lt;port&gt;/");
            socket.on('connect', function() {
                // Join the room.
                socket.emit('subscribe', room);
            })
            socket.on(eventToListenTo, function(data) {
                console.log("New transaction received: " + data.txid)
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>